# ============================================================================
# Application Settings / 应用程序设置
# ============================================================================
DEBUG=false


# ============================================================================
# LLM Configuration / LLM 配置
# ============================================================================

# Default LLM provider and models / 默认 LLM 提供商和模型
LLM_DEFAULT_PROVIDER=dashscope


# Disable LLM quality-based routing / 禁用基于质量的 LLM 路由
# When true, only uses default provider without fallback / 为 true 时，仅使用默认提供商，不进行回退
LLM_DISABLE_QUALITY_ROUTING=true

# Multimodal image transport format / 多模态图片传输格式
# base64: Compress and encode image as base64 (recommended, works with all providers)
#         压缩并编码图片为 base64（推荐，适用于所有提供商）
# url: Send image URL directly (faster but URL must be publicly accessible)
#      直接发送图片 URL（更快但 URL 必须可公开访问）
#      Note: DashScope cannot access localhost or internal network URLs (192.168.x.x)
#      注意：DashScope 无法访问 localhost 或内网 URL（192.168.x.x）
LLM_MULTIMODAL_IMAGE_FORMAT=url

# LLM adapter automatic logging / LLM 适配器自动日志记录
LLM_ADAPTER_LOGGING=true
LLM_ADAPTER_LOG_DIR=./llm-adapter-logs


# ============================================================================
# LLM Provider API Keys / LLM 提供商 API 密钥
# ============================================================================

# OpenRouter API (provides access to multiple vision models) / OpenRouter API（提供多个视觉模型访问）
OPENROUTER_API_KEY=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
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Alibaba DashScope API / 阿里云灵积 API
DASHSCOPE_API_KEY=sk-098789f6e2be43bd8bf2befc2ee24331
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/api/v1

# Google Cloud Vertex AI Configuration / Google Cloud Vertex AI 配置
GOOGLE_APPLICATION_CREDENTIALS=core/llm_adapter/wingy-gemini-caller-e87ee-0e97104c6c62.json


# ============================================================================
# Orchestrator Configuration / 编排器配置
# ============================================================================

# Retry and timeout settings / 重试和超时设置
ORCHESTRATOR_MAX_RETRIES=3
ORCHESTRATOR_TIMEOUT_SECONDS=30.0
ORCHESTRATOR_RETRY_DELAY_SECONDS=0.5
ORCHESTRATOR_EXPONENTIAL_BACKOFF=true

# Feature flags / 功能开关
# Never use reply redis cache / 不使用回复 Redis 缓存
NO_REPLY_CACHE=true

# Disable persona cache / 禁用人设缓存
NO_PERSONA_CACHE=true

# Disable strategy planner / 禁用策略规划器
NO_STRATEGY_PLANNER=true

# Disable intimacy check / 禁用亲密度检查
NO_INTIMACY_CHECK=true

# Use merge step (combines screenshot analysis + context summary + scenario analysis)
# 使用合并步骤（合并截图分析 + 上下文摘要 + 场景分析）
USE_MERGE_STEP=false


# ============================================================================
# Prompt Configuration / 提示词配置
# ============================================================================

# Maximum number of recent messages for context / 上下文中最近消息的最大数量
PROMPT_CONTEXT_MAX_MESSAGES=10

# Prompt Optimization (Phase 3: Output Optimization) / 提示词优化（第三阶段：输出优化）
# Include reasoning fields in LLM outputs / 在 LLM 输出中包含推理字段
PROMPT_INCLUDE_REASONING=false

# Maximum tokens for reply generation (20-500) / 回复生成的最大 token 数（20-500）
PROMPT_MAX_REPLY_TOKENS=200

# Use compact output schemas to reduce tokens / 使用紧凑的输出模式以减少 token
PROMPT_USE_COMPACT_SCHEMAS=true


# ============================================================================
# Billing Configuration / 计费配置
# ============================================================================

# Cost limits / 成本限制
BILLING_COST_LIMIT_USD=0.1
BILLING_DEFAULT_USER_QUOTA_USD=10.0


# ============================================================================
# Database Configuration / 数据库配置
# ============================================================================

# SQLite database URL / SQLite 数据库 URL
DB_URL=sqlite+aiosqlite:///./conversation.db
DB_ECHO=false


# ============================================================================
# Cache Configuration / 缓存配置
# ============================================================================

# Redis cache URL / Redis 缓存 URL
CACHE_REDIS_URL=redis://127.0.0.1:6379/0


# ============================================================================
# Logging Configuration / 日志配置
# ============================================================================

# Log failed JSON replies to file for debugging / 将失败的 JSON 回复记录到文件以便调试
LOG_FAILED_JSON_REPLIES=true


# ============================================================================
# Trace Logging Configuration / 追踪日志配置
# ============================================================================

# Enable trace logging / 启用追踪日志
# TRACE_ENABLED=false

# Trace log level (error, info, debug) / 追踪日志级别（error, info, debug）
# TRACE_LEVEL=info

# Trace log file path / 追踪日志文件路径
# TRACE_FILE_PATH=logs/trace.jsonl

# Log LLM prompts / 记录 LLM 提示词
# TRACE_LOG_LLM_PROMPT=true

# Log timing information for performance monitoring / 记录时间信息以进行性能监控
TRACE_LOG_TIMING=true


# ============================================================================
# CORS Settings / CORS 设置
# ============================================================================

# Allowed origins (comma-separated for multiple origins) / 允许的来源（多个来源用逗号分隔）
CORS_ORIGINS=["*"]


# ============================================================================
# Proxy Configuration / 代理配置
# ============================================================================

# Proxy settings for Google Cloud (if needed) / Google Cloud 代理设置（如需要）
# HTTP_PROXY=http://proxy.zhizitech.org:10803
# HTTPS_PROXY=http://proxy.zhizitech.org:10803
# GRPC_PROXY=http://proxy.zhizitech.org:10803
